<!-- There are only as many categories as there in the Portifolio -->

<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mckaziwe Media</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/sidebars/">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.css">
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="assets/favicon/site.webmanifest">
    <!-- Chrome, Firefox OS and Opera -->
<meta name="theme-color" content="#22A9B1">
<!-- Windows Phone -->
<meta name="msapplication-navbutton-color" content="#22A9B1">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-status-bar-style" content="#22A9B1">
  <!-- <link href="assets/sidebars.css" rel="stylesheet"> -->

</head>

<body>
  <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand heading bold text-muted href="#">
        <img src="assets/favicon/favicon.ico" alt="" class="d-inline-block align-text-center"> Mckaziwe
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav navbar-nav-scroll" style="--bs-scroll-height: 100vh;">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="./">Home</a>
          </li>
      
        
          <li class="nav-item">
            <a class="nav-link login-out" href="#">Logout</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <div class="p-3 px-4 side-bar bg-dark" style="width: 18rem;">
    <a href="#" class="align-items-center pb-3 mb-4 link-white text-decoration-none">
      <img src="assets/favicon/android-chrome-512x512.png" style="max-width: 50px"></img>
      <div class="text-white">Loged in as <span class="loged-in-user"></span></div>
    </a>


    <ul class="list-unstyled ps-0 side-bar-menu mt-3">
      <li class="mb-1 nav-item">
        <a href="./" class="d-inline-flex align-items-center border-0 active" aria-expanded="true">
          Home
        </a>
      </li>
      <li class="mb-1 nav-item">
        <a href="#" class="log-out d-inline-flex align-items-center border-0" aria-expanded="true">
          Logout
        </a>
      </li>
    </ul>
  </div>
  <main class="bg-light white-text">
    <div class="quote-container pt-5">
      <div class="py-3">
        Loged in as <strong class="loged-in-user text-primary"></strong>

      </div>
      <h1  class="heading">Portifolio Manager</h1>
      <h3 class="mt-5 heading">Sections</h3>
      <!-- 
        <div class="row mt-3">
          <div class="col col-sm-12 col-md-9">
            <label for="album-name" class="form-label">Album title</label>
            <input type="text" class="form-control is-valid" id="album-name" value="Mark" required="">
            <div class="valid-feedback">
              Looks good!
            </div>
          </div>
          <div class="col col-sm-12 col-md-3 pt-4">
            <button class="btn btn-success border mt-2" id="add-album">New Album</button>
          </div>
        </div> -->

      <ul class="list-group list-group-flush mt-3" id="album-list" style="background-color: transparent;">
        <div class="spinner-border" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </ul>
    </div>



    <div class="toast align-items-center bg-success text-white position-absolute p-1 m-3 bottom-0 end-0" role="alert"
      id="toast" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
        <div class="toast-body" id="toast-body"></div>
        <button id="close-toast" type="button" class="btn-close me-2 m-auto" data-bs-dismiss="toast"
          aria-label="Close"></button>
      </div>
    </div>


  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
  <script src="assets/js/jquery.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>

  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>


  <script>
    $(document).ready(function () {
      const firebaseConfig = {

        apiKey: "AIzaSyB-tEIY3LlVKA-bjslG_bJ2Yk3zb2YphG0",

        authDomain: "unza-connect.firebaseapp.com",

        projectId: "unza-connect",

        storageBucket: "unza-connect.appspot.com",

        messagingSenderId: "768834600387",

        appId: "1:768834600387:web:f248e6d61cec0202505176"

      };

      const app = firebase.initializeApp(firebaseConfig);
      defaultStorage = firebase.storage();
      db = firebase.firestore();

      // Code for authentication
      firebase.auth().onAuthStateChanged((user) => {
        if (user !== null) {
          // The user object has basic properties such as display name, email, etc.
          const displayName = user.displayName;
          const email = user.email;
          const photoURL = user.photoURL;
          const emailVerified = user.emailVerified;

          // The user's ID, unique to the Firebase project. Do NOT use
          // this value to authenticate with your backend server, if
          // you have one. Use User.getIdToken() instead.
          const uid = user.uid;

          $('.loged-in-user').html(email);
        } else {
          // user not signed in
          window.location.href = './';
          console.log("Failed to verify");
        }

      });

      // add photo album
      $("#add-album").on("click", function (event) {
        event.preventDefault();
        let albumName = $("#album-name").val();
        db.collection("mckaziwe-photo-albums").doc().set({
          albumName: albumName,
          numPhotos: 0
        }).then((message) => {
          console.log(message);
          $("#toast-body").html(`${albumName} added successfully ðŸ˜Š`)
          $("#toast").show();
          getPhotoAlbums();

        }).catch((error) => {
          console.log(error.message)
        })
      })

      // creates a new photo album  to Cloud Firestore.
      $("#close-toast").on("click", function () {
        $("#toast").hide();
      })

      // get  photo albums
      getPhotoAlbums();
      function getPhotoAlbums() {
        // loading...
        $("#album-list").html(`
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
          `);
        db.collection("mckaziwe-photo-albums").get().then((querySnapshot) => {
          $("#album-list").html("");
          querySnapshot.forEach((doc) => {
            // doc.data() is never undefined for query doc snapshots
            $("#album-list").append(`
            <a href="admin-dashboard.html?id=${doc.id}&title=${doc.data().albumName}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
              ${doc.data().albumName}
              <!-- <span class="badge bg-primary rounded-pill">${doc.data().numPhotos}</span> -->
            </a>
            `);
          });
        });
      }

      // signout user
      $('.log-out').on('click', function () {
        firebase.auth().signOut().then(() => {
          // Sign-out successful.
          window.location.href = './';
        }).catch((error) => {
          // An error happened.
          console.log("Failed to log out");
        });
      })
    });





  </script>
</body>

</html>